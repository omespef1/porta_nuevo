<div class="card">
  <div class="card-header bg-primary text-light">
    Gestiòn de sucursales
    </div>
  <div class="card-body">
    <dx-data-grid [editing]="editing" [dataSource]="data"   [showBorders]="true"    [repaintChangesOnly]="true"
    [showColumnLines]="true"
        [showRowLines]="true"
        (onRowUpdated)="updateBranchOffice($event)"
        (onRowInserted)="addBranchOffice($event)"
        [showBorders]="true"
        [rowAlternationEnabled]="true">
    [highlightChanges]="true">      
      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-search-panel
      [visible]="true"
      [highlightCaseSensitive]="true"
  ></dxo-search-panel>
     <dxo-editing 
          mode="popup"
          [useIcons]="true"
          [allowUpdating]="true"
          [allowDeleting]="true"
          [confirmDelete]="true">
          [allowAdding]="true">
          <dxo-texts
           deleteRow="Borrar fila"
           addRow="Añadir"
           cancelAllChanges="Cancelar cambios"
           editRow="Editar"
           saveRowChanges="Guardar"
           cancelRowChanges="Cancelar">
       </dxo-texts>
     </dxo-editing>
     <dxi-column
     dataField="Empr_Codigo"
     caption="Empresa"   >         
     <dxo-lookup
         [dataSource]="businessData"
         displayExpr="Empr_Nombre" 
         valueExpr="Empre_Codigo">
     </dxo-lookup>
 </dxi-column>
     <dxi-column  dataField="Sucu_Codigo" caption="Código" dataType="string" >
      <dxi-validation-rule type="required"></dxi-validation-rule>
     </dxi-column>
     <dxi-column dataField="Sucu_Nombre" caption="Nombre" dataType="string">
      <dxi-validation-rule type="required"></dxi-validation-rule> </dxi-column>
     <dxi-column dataField="Sucu_Nivele" caption="Niveles" dataType="number">
      <dxi-validation-rule type="required"></dxi-validation-rule>
     </dxi-column>
     <dxi-column dataField="Sucu_Padres" caption="Nivel Padre" dataType="number">
      <dxi-validation-rule type="required"></dxi-validation-rule>
     </dxi-column>
     <dxi-column dataField="Sucu_Permov" caption="Permite movimiento" dataType="string">
      <dxi-validation-rule type="required"></dxi-validation-rule>
      <dxo-lookup
      [dataSource]="allowMovement"
      displayExpr="text"
      valueExpr="value">
  </dxo-lookup>
     </dxi-column>
     <dxi-column dataField="Sucu_Estado" caption="Estado" dataType="string"></dxi-column>
    </dx-data-grid>
  </div>

 
</div>
<ngb-alert *ngIf="successMessage" [type]="'success'" (close)="successMessage = null">{{ successMessage }}</ngb-alert>

