<div  class="card">
  <div class="card-header bg-primary text-light">
    Gestión de terceros
    </div>

    <dx-load-panel
    #loadPanel
    shadingColor="rgba(0,0,0,0.4)"
    [position]="{ of: '#thirdParties' }"
    [(visible)]="loading"
    [showIndicator]="true"
    [showPane]="true"
    [shading]="true"
    [closeOnOutsideClick]="false"
    >
</dx-load-panel>
  <div id="thirdParties" class="card-body">
    <dx-data-grid [editing]="editing" [dataSource]="thirdPartieData"   [showBorders]="true"    [repaintChangesOnly]="true"
    [showColumnLines]="true"
        [showRowLines]="true"
        (onRowUpdated)="updateThirdPartie($event)"
        (onRowInserted)="addThirdPartie($event)"
        [showBorders]="true"
        [rowAlternationEnabled]="true">
    [highlightChanges]="true">      
      <dxo-paging [pageSize]="10"></dxo-paging>
      ​<dxo-filter-row [visible]="true"></dxo-filter-row>
<dxo-header-filter [visible]="true"></dxo-header-filter>
      <dxo-search-panel
      [visible]="true"
      [highlightCaseSensitive]="true" [placeholder]="'Buscar'">
  </dxo-search-panel>
     <dxo-editing  
     mode="form"
          [useIcons]="true"
          [allowUpdating]="true"
          [allowDeleting]="true"
          [confirmDelete]="true"
          [allowAdding]="true">
          <dxo-texts
           deleteRow="Borrar fila"
           addRow="Añadir"
           cancelAllChanges="Cancelar cambios"
           editRow="Editar"
           saveRowChanges="Guardar"
           cancelRowChanges="Cancelar">
       </dxo-texts>
     </dxo-editing>
     <dxi-column
     dataField="Empr_Codigo"
     caption="Empresa"   >         
     <dxo-lookup
         [dataSource]="businessData"
         displayExpr="Empr_Nombre" 
         valueExpr="Empr_Codigo">
     </dxo-lookup>
 </dxi-column>
     <dxi-column  dataField="Terc_Codigo" caption="Código" dataType="string" >
      <dxi-validation-rule 
        type="required"
        message="Código requerido">
    </dxi-validation-rule>
     </dxi-column>
     <dxi-column dataField="Terc_Nombre" caption="Nombre" dataType="string">
      <dxi-validation-rule 
      type="required"
      message="Nombre requerido">
  </dxi-validation-rule>
    </dxi-column>
     <dxi-column dataField="Terc_Tipdoc" caption="Tipo de documento" dataType="string">
      <dxi-validation-rule 
        type="required"
        message="Tipo de documento">
    </dxi-validation-rule>
    <dxo-lookup
    [dataSource]="typeDocuments"
    displayExpr="text" 
    valueExpr="code">
</dxo-lookup>
     </dxi-column>
     <dxi-column dataField="Terc_Nomcom" caption="Nombre comercial" dataType="string">
      <dxi-validation-rule 
        type="required"
        message="Nombre comercial requerido">
    </dxi-validation-rule>
     </dxi-column> 
     <dxi-column dataField="Terc_Direci" caption="Dirección" dataType="string" >
      <dxi-validation-rule 
        type="required"
        message="Dirección requerido">
    </dxi-validation-rule>
     </dxi-column> 
     <dxi-column dataField="Terc_Digver" caption="Dígito Verificación" dataType="number">
      <dxi-validation-rule 
        type="required"
        message="Dígito Verificación requerido">
    </dxi-validation-rule>
    <dxi-validation-rule 
    type="stringLength"  max="1" 
    message="Dígito de Verificación no puede contener más de 1 dígito">
</dxi-validation-rule>
     </dxi-column>   
     <dxi-column dataField="Terc_Telefo" caption="Teléfono" dataType="number">
      <dxi-validation-rule 
        type="required"
        message="Teléfono requerido">
    </dxi-validation-rule>
     </dxi-column>  
     <dxi-column dataField="Terc_Emails" caption="Email" dataType="string">
      <dxi-validation-rule type="required" message="Email requerido"></dxi-validation-rule>
      <dxi-validation-rule type="email" message="Email no válido"></dxi-validation-rule>
     </dxi-column> 
     <dxi-column
     dataField="Terc_Estado"
     caption="Estado"   >   
     <dxi-validation-rule 
     type="required"
     message="Estado requerido">
 </dxi-validation-rule>      
     <dxo-lookup
         [dataSource]="[  { value:'I','text':'Inactivo' }, {  value:'A', text:'Activo'}]"
         displayExpr="text" 
         valueExpr="value">
     </dxo-lookup>
 </dxi-column>
    </dx-data-grid>
  </div>

 
</div>
<ngb-alert *ngIf="successMessage" [type]="'success'" (close)="successMessage = null">{{ successMessage }}</ngb-alert>

